### Updated 6.12.2023

Альтернативная реализация форм в админских схемах. Позволяет пользоваться формами symfony, оформлением bootstrap, typescript, css и прочими благами современного мира.

Так же присутствует возможность создавать кастомные страницы (или ajax экшены) для менеджерки (прим, отчеты, статистика и т.д.), которые будут закрыты той же ролью, что и остальные страницы схемы.

Для того, что бы начать пользоваться нужно поменять родителя схемы с `\TBaseSchema` на `\AwardWallet\MainBundle\Service\EnhancedAdmin\AbstractEnhancedSchema`. После этого заработает хук, который начнет редиректить на форму с новым интерфейсом. Код для новых форм или экшенов можно писать прямо в этом же классе, унаследовавшись от `AbstractEnhancedSchema` или создать отдельный сервис. 

Что бы определить поведение формы добавления/редактирования нужно реализовать интерфейс `\AwardWallet\MainBundle\Service\EnhancedAdmin\EditActionInterface`, которому необходимы 2 метода: `getSchema()` (название схемы, из которой формируется роль) и `editAction`, который создает форму и обрабатывает ее.

### Метод editAction

Принимает 3 аргумента:
1) Request
2) FormRenderer, в который нужно передать форму symfony а так же bool параметр нужны ли вам подключения кастомных js/css файлов (по умолчанию false). Если да, то подключатся webpack entry points вида `page-manager/{schema}.form` и нужно создать файл `assets/bem/block/page/manager/{schema}.form.entry.ts`, в котором и подключить нужные стили и js. 
3) id редактируемой сущности (если режим редактирования а не создания)

Метод должен вызвать метод `FormRenderer::render` и вернуть его результат. В остальном editAction является обычным контроллером, но без аннотаций раута, проверки ролей (они проходят автоматически).

### Методы для кастомных страниц

Для создания страниц и экшенов есть другой интерфейс `\AwardWallet\MainBundle\Service\EnhancedAdmin\ActionInterface`, который требует реализации 2 методов: знакомый `getSchema()` и `action`, который будет рассматривать все ваши возможные экшены.

### Метод action

Принимает 3 аргумента:
1) Request
2) PageRenderer, который похож на FormRenderer, только передавать можно параметры для твига а именно `content`, который отрендеришь предварительно как то сам.
3) action, который нужно выполнить. Определяешь сам.

Возвращать не обязательно выхлоп `PageRenderer::render`, можно возвращать любой response. PageRenderer нужен для генерации страницы с меню менеджерки и прочим. 
