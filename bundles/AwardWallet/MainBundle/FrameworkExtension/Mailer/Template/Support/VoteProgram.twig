{% extends '@MailTemplate/Layout/base.twig' %}

{% block subject %}{% apply spaceless %}{% autoescape false %}
    {% if type is constant('AwardWallet\\MainBundle\\FrameworkExtension\\Mailer\\Template\\Support\\VoteProgram::TYPE_FIXED') %}
        {{ 'support.subject.fixed'|trans({
            '%displayName%': provider.displayname
        }, 'email', lang)|desc('%displayName% has been fixed.') }}
    {% else %}
        {{ 'support.subject.added'|trans({
            '%displayName%': provider.displayname
        }, 'email', lang)|desc('Support for %displayName% has been added.') }}
    {% endif %}
{% endautoescape %}{% endapply %}{% endblock subject %}

{% block content %}
    {% import '@MailTemplate/CommonMacro.twig' as commonMacro %}

    {{ commonMacro.hello(user.firstname, _context) }}

    {% if type is constant('AwardWallet\\MainBundle\\FrameworkExtension\\Mailer\\Template\\Support\\VoteProgram::TYPE_FIXED') %}

        {{ commonMacro.paragraph(
            'support.provider-fixed'|trans({
                '%displayName%': provider.displayname|htmlencode,
                '%bold_on%': '<b>',
                '%bold_off%': '</b>'
            }, 'email', lang)|desc("Our records indicate that you told us that %bold_on%%displayName%%bold_off% was not working. We looked into this issue and got it resolved."),
            _context, {escape: false}
        ) }}

        {{ commonMacro.paragraph(
            'support.please-try-update'|trans({
                '%displayName%': provider.displayname|htmlencode,
                '%bold_on%': '<b>',
                '%bold_off%': '</b>'
            }, 'email', lang)|desc("Please try updating your balance on %bold_on%%displayName%%bold_off% via:"),
            _context, {escape: false}
        ) }}

        {% set link = baseUrl ~ path('aw_account_list') %}
        {{ commonMacro.dottedLink(link, link, _context) }}

        {{ commonMacro.paragraph(
            'support.still-problem'|trans({}, 'email', lang)|desc("If you still see a problem with this program please let us know via:"),
            _context
        ) }}

        {% set link = baseUrl ~ path('aw_contactus_index') %}
        {{ commonMacro.dottedLink(link, link, _context) }}
    {% else %}
        {{ commonMacro.paragraph(
            'support.provider-added'|trans({
                '%displayName%': provider.displayname|htmlencode,
                '%bold_on%': '<b>',
                '%bold_off%': '</b>'
            }, 'email', lang)|desc("Our records indicate that you expressed interest in us adding support for %bold_on%%displayName%%bold_off% program."),
            _context, {escape: false}
        ) }}

        {{ commonMacro.paragraph(
            'support.please-try-add'|trans({}, 'email', lang)|desc("We looked into it and got it implemented. Please try adding this program using this link:"),
            _context
        ) }}

        {% set link = baseUrl ~ path('aw_account_add', {providerId: provider.providerid}) %}
        {{ commonMacro.dottedLink(link, link, _context) }}

        {{ commonMacro.paragraph(
            'support.problem'|trans({}, 'email', lang)|desc("If you see a problem with this program please let us know via:"),
            _context
        ) }}

        {% set link = baseUrl ~ path('aw_contactus_index') %}
        {{ commonMacro.dottedLink(link, link, _context) }}
    {% endif %}
{% endblock %}
